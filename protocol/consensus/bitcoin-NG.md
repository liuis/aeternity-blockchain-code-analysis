比特币NG用于永恒
==========

比特币NG是比特币协议的演变[1]。它仍然使用Nakamoto共识，但将领导者选举和阻止生产分开。通过引入键和微两种块来完成这种分离。关键块用于领导者选举。它们不包含任何交易，但需要解决工作证明难题。一旦找到了领导者，他们就可以生成多个微块。微块包括交易，但不需要工作证明谜题的解决方案。相反，他们需要以当前的领导者加密签名才能被视为有效。

分拆领导者选举和阻止生产使领导者能够快速连续生产微块，从而显着提高交易吞吐量。


比特币NG的低级视图
===
为了让矿工成为时代的领导者，他们必须生成一个包含有效的工作证明解决方案的密钥块和一个公钥，他们拥有相应的私钥。
一旦他们产生了这样的块，他们就可以开始发布Micro块了。这些Micro块不需要任何Proof of Work拼图解决方案，但必须使用属于Key块中包含的公钥的私钥进行签名。

      ┌──────────────────
      │1│┌─────────────────────────────────
      │KB-1│───│MB（1）│───│MB（1）│───────────────────────────────────────────────
      ││└────────────────────────────────────────────────────────────
      └───────────────────


      KB1：具有属于领导者1的发布键1的密钥块
      MB（1）：由主管1使用Priv Key 1签名的微块
      1：Key Block 1链条的高度

      描述：
      领导者1播放了两个Micro Block。领导者2发出新的密钥块拿着他的钥匙。
      到目前为止，领导者2发射了一个Micro Block


遵循该协议的领导者会发出微块，直到他们收到另一位领导者广播的密钥块。微块不以高度来区分 - 它们继承了发射它们的领导者的高度。所有具有相同高度的块都称为生成。微块的接收者可以通过使用来自同一领导者广播的密钥块的公钥交叉检查微块中的签名来验证它们。

潜伏
==

比特币平均每10分钟播放一次 - 它由协议驱动并由目标保护。 Aeternity假设关键块为3分钟，微块之间为3秒时间差。目标和工作证明也保护了3分钟的密钥块解决方案。

奖励
==
在比特币NG提出的方案中，提供链的活跃性和完整性存在重大挑战。它通过加密经济激励来解决。为了保证下一位领导者能够尽可能多地关注Micro Blocks，下一位领导者将获得固定奖励，而上一代Micro Block的费用为60％。前一位领导人获得了他确认的交易中40％的费用。

     ┌──────────────────
     ││┌──────────────────────────────────────────────────────────
     │领导1│───────────────────────────────────────────────────────────────────────────
     ││└────────────────────────────────────────────────────────────
     └───────────────────
      领导者2奖：治理（Coinbase）+ 0.6 *（FeeN1 + FeeN2）+ 0.4 * FeeN3

在Aeternity中，授予固定奖励和代收费延迟了180个关键块（代）。如上所述，密钥块应该大约每3分钟广播一次，因此近似的延迟是：
```
180 * 3分钟= 540分钟= 9小时
```
采矿区块的回报是遵循公式描述的通胀目标曲线

！[]（./ inflation.png）
<！ - 
F（H）=
\左\ {\开始{矩阵}
\ frac {0.3h} {S}＆\ text {for} h <S \\
\ frac {0.30} {1 +（\ frac {h-S} {0.8N}）^ {1.3}}  -  0.0003＆\ text {otherwise}
\ {端矩阵} \右。
 - >
其中_I（x）_是高度_x_的膨胀目标，_S_是慢起始块高度，_N_是一年中的块数。

缓慢的开始是采矿奖励的初始阶段
线性上升到预期的通货膨胀。这是为了
在完全采矿奖励之前稳定采矿目标
授予。

coinbase at由上面的公式计算，但为了简化
协议并避免在不同的实现中舍入错误，
实际的coinbase作为表格给出。此外，coinbase是
总是满值，没有分数。投币基地高度表
可以找到[这里]（./ coinbase.md）。

慢启动高度（_S_）设置为960，对应于48
小时，一年中的街区数（_N_）是175200，而且
coinbase是从最初的总供应量计算出来的
276450333.499323152460728285。

福克斯
==

比特币NG继承了比特币在多个块生产者处于相同高度时的分叉能力。它发生在密钥块级别。 Bitcoin-NG使用与比特币相同的方法解决冲突 - 也就是说 - 最长的链存活下来。微型块不带重量。仍然可以在Micro Block级别使用叉子。
1.网络传播时间。挖掘新的密钥块与旧的领导者接收它之间存在延迟。在那个时候，这位老领导人仍在广播微块。但是，它们不再受到重视。新领导人将重新签名并重新播出。我们期望每个Leader切换器都有这样的微型叉。

2.恶意的领导者。恶意行为者可能会发出冲突的微块。结果将是不正确的链。为了解决这个问题，我们将发出欺诈证据。


                         ┌──────┐
                ┌────────│MB（1）'│
                │└──────┘
                │
                │
                │┌─────────
             ┌────────│││─────
          ───│MB（1）│────│KB-2├──│MB（2）│
             └──────────────────────────────────
                        └────────┘

        由老领导人播放的微块不再形成共识。
        新领导者可以阅读它并包括新播出的所有交易
        微块。最有可能的是，新领导人将播放微块
        尽快地。鉴于网络中的节点非常相似
        mempool内容MB（1）'和MB（2）应该非常相似。重新签名
        Leader 2节点中缺少的事务增量是非常便宜的操作。

欺诈证据
==

恶意的领导者可以在一代微观中构建分叉
通过直接从他的钥匙块分叉或通过分叉来阻止
在微块上。这可以用来破坏网络或
执行双重攻击。

为了防止这种恶意行为，下一个密钥块的矿工
可以在其代中的微块中提交欺诈证据。只要
该领导者可以提交欺诈证据以避免泛滥网络
报告本身可以被视为DoS
攻击。

此外，不止一次报告给定代的欺诈行为
被视为违反协议，即使有多个行为
欺诈行为。在只有块的约束下
上一代可以报道，这意味着只有一个欺诈行为
报告是一代人允许的。

欺诈证据由两个兄弟微标头构成（带有
同一个前一个指针）以及该公钥
签名者。欺诈证据包含在一个微块体中，并且
header必须包含用于标记其的欺诈证明对象的哈希值
在街区存在。

如果矿工以这种方式被报告为欺诈，其受益人
不会获得该关键区块的任何采矿奖励（即没有投币基础
任何一代都不收费）。欺诈的记者将得到
治理控制的奖励。为了不扭曲通货膨胀
不属于欺诈矿工的硬币被[锁定]（locking.md）代替。

可以找到证明欺诈对象的序列化格式
[这里]（../ serializations.md＃proof-of-fraud），以及包含
定义了微块中的欺诈证明对象
[这里]（../ serializations.md＃微块）

---
####参考文献

1.比特币NG：可扩展的区块链协议，Ittay Eyal，Adem Efe Gencer，EminGünSirer和Robbert van Renesse，康奈尔大学，2016
